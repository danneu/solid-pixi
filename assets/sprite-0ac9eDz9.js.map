{"version":3,"file":"sprite-0ac9eDz9.js","sources":["../../src/pages/demo/masks/sprite.tsx"],"sourcesContent":["import * as PIXI from \"pixi.js\";\nimport { onTick, Application, Sprite } from \"@danneu/solid-pixi\";\nimport {\n  createResource,\n  createSignal,\n  Show,\n  Suspense,\n  type Component,\n} from \"solid-js\";\n\nconst Example: Component<{\n  textures: Record<string, PIXI.Texture>;\n}> = (props) => {\n  const [target, setTarget] = createSignal({ x: 0, y: 0 });\n  const [mask, setMask] = createSignal({ x: 310, y: 190 });\n\n  const randomizeTarget = () => {\n    setTarget({\n      x: Math.floor(Math.random() * 550),\n      y: Math.floor(Math.random() * 300),\n    });\n  };\n\n  onTick(() => {\n    // Move mask towards target\n    setMask((prev) => ({\n      x: prev.x + (target().x - prev.x) * 0.1,\n      y: prev.y + (target().y - prev.y) * 0.1,\n    }));\n\n    if (Math.abs(mask().x - target().x) < 1) {\n      randomizeTarget();\n    }\n  });\n\n  // When we already have a PIXI.Sprite instance outside of the render fn,\n  // we can use <Sprite as={instance} /> to add it to the component tree,\n  // and the Sprite node will us the instance instead of creating a new one.\n  // Else you'd have to `app.stage.addChild(instance)` and `app.stage.removeChild(instance)`\n  // manually.\n  const maskSprite = new PIXI.Sprite(props.textures[\"cells\"]);\n\n  return (\n    <>\n      <Sprite texture={props.textures[\"bg\"]} />\n      <Sprite texture={props.textures[\"cells\"]} scale={1.5} mask={maskSprite} />\n      <Sprite\n        as={maskSprite}\n        texture={props.textures[\"flowerTop\"]}\n        anchor={0.5}\n        x={mask().x}\n        y={mask().y}\n      />\n    </>\n  );\n};\n\nexport default function () {\n  const [textures] = createResource(async () => {\n    return await PIXI.Assets.load<PIXI.Texture>([\n      { alias: \"bg\", src: \"https://pixijs.com/assets/bg_plane.jpg\" },\n      { alias: \"cells\", src: \"https://pixijs.com/assets/cells.png\" },\n      { alias: \"flowerTop\", src: \"https://pixijs.com/assets/flowerTop.png\" },\n    ]);\n  });\n\n  return (\n    <>\n      <Suspense fallback={<div>Loading</div>}>\n        <Application backgroundColor={0x1099bb} eventMode=\"static\">\n          <Show when={textures()}>\n            {(textures) => <Example textures={textures()} />}\n          </Show>\n        </Application>\n      </Suspense>\n    </>\n  );\n}\n"],"names":["Example","props","target","setTarget","createSignal","x","y","mask","setMask","randomizeTarget","Math","floor","random","onTick","prev","abs","maskSprite","PIXI","textures","_$createComponent","Sprite","texture","scale","as","anchor","createResource","load","alias","src","Suspense","fallback","_tmpl$","children","Application","backgroundColor","eventMode","Show","when"],"mappings":";;;;AAUA,MAAMA,UAEAC,CAAU,UAAA;AACd,QAAM,CAACC,QAAQC,SAAS,IAAIC,aAAa;AAAA,IAAEC,GAAG;AAAA,IAAGC,GAAG;AAAA,EAAA,CAAG;AACvD,QAAM,CAACC,MAAMC,OAAO,IAAIJ,aAAa;AAAA,IAAEC,GAAG;AAAA,IAAKC,GAAG;AAAA,EAAA,CAAK;AAEvD,QAAMG,kBAAkBA,MAAM;AAClB,cAAA;AAAA,MACRJ,GAAGK,KAAKC,MAAMD,KAAKE,OAAAA,IAAW,GAAG;AAAA,MACjCN,GAAGI,KAAKC,MAAMD,KAAKE,WAAW,GAAG;AAAA,IAAA,CAClC;AAAA,EACH;AAEAC,SAAO,MAAM;AAEXL,YAASM,CAAU,UAAA;AAAA,MACjBT,GAAGS,KAAKT,KAAKH,OAASG,EAAAA,IAAIS,KAAKT,KAAK;AAAA,MACpCC,GAAGQ,KAAKR,KAAKJ,SAASI,IAAIQ,KAAKR,KAAK;AAAA,IAAA,EACpC;AAEEI,QAAAA,KAAKK,IAAIR,KAAK,EAAEF,IAAIH,OAAO,EAAEG,CAAC,IAAI,GAAG;AACvB,sBAAA;AAAA,IAAA;AAAA,EAClB,CACD;AAOD,QAAMW,aAAa,IAAIC,OAAYhB,MAAMiB,SAAS,OAAO,CAAC;AAE1DC,SAAAA,CAAAA,gBAEKC,UAAM;AAAA,IAAA,IAACC,UAAO;AAAEpB,aAAAA,MAAMiB,SAAS,IAAI;AAAA,IAAA;AAAA,EAAC,CAAAC,GAAAA,gBACpCC,UAAM;AAAA,IAAA,IAACC,UAAO;AAAEpB,aAAAA,MAAMiB,SAAS,OAAO;AAAA,IAAC;AAAA,IAAEI,OAAO;AAAA,IAAKf,MAAMS;AAAAA,EAAAA,CAAUG,GAAAA,gBACrEC,UAAM;AAAA,IACLG,IAAIP;AAAAA,IAAU,IACdK,UAAO;AAAEpB,aAAAA,MAAMiB,SAAS,WAAW;AAAA,IAAC;AAAA,IACpCM,QAAQ;AAAA,IAAG,IACXnB,IAAC;AAAA,aAAEE,KAAOF,EAAAA;AAAAA,IAAC;AAAA,IAAA,IACXC,IAAC;AAAA,aAAEC,KAAOD,EAAAA;AAAAA,IAAAA;AAAAA,EAAC,CAAA,CAAA;AAInB;AAE2B,SAAA,SAAA;AACzB,QAAM,CAACY,QAAQ,IAAIO,eAAe,YAAY;AAC5C,WAAO,MAAMR,OAAYS,KAAmB,CAC1C;AAAA,MAAEC,OAAO;AAAA,MAAMC,KAAK;AAAA,IAAA,GACpB;AAAA,MAAED,OAAO;AAAA,MAASC,KAAK;AAAA,IAAA,GACvB;AAAA,MAAED,OAAO;AAAA,MAAaC,KAAK;AAAA,IAAA,CAA2C,CACvE;AAAA,EAAA,CACF;AAED,SAAAT,gBAEKU,UAAQ;AAAA,IAAA,IAACC,WAAQ;AAAA,aAAAC,OAAA;AAAA,IAAA;AAAA,IAAA,IAAAC,WAAA;AAAA,aAAAb,gBACfc,aAAW;AAAA,QAACC,iBAAiB;AAAA,QAAUC,WAAS;AAAA,QAAA,IAAAH,WAAA;AAAA,iBAAAb,gBAC9CiB,MAAI;AAAA,YAAA,IAACC,OAAI;AAAA,qBAAEnB,SAAS;AAAA,YAAC;AAAA,YAAAc,UAClBd,CAAAA,cAAQC,gBAAMnB,SAAO;AAAA,cAAA,IAACkB,WAAQ;AAAA,uBAAEA,UAAS;AAAA,cAAA;AAAA,YAAC,CAAA;AAAA,UAAA,CAAI;AAAA,QAAA;AAAA,MAAA,CAAA;AAAA,IAAA;AAAA,EAAA,CAAA;AAM5D;"}